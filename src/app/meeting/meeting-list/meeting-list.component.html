<rb-header></rb-header>

<div class="container">
  <div class="row">
    <div class="col s12">

      <div>
        <!-- TODO : display next line only if user is a Coachee-->

        <h4 class="text-right">Il vous reste <span class="nb-seances">{{(user | async)?.availableSessionsCount}}</span> séances</h4>
        <p class="text-right" *ngIf="isUserACoachee((user | async))">
          Planifier une nouvelle séance
          <a class="btn-floating btn-large waves-effect waves-light add-meeting-btn" (click)="goToDate()">
            <i class="material-icons">add</i>
          </a>
        </p>
      </div>

      <!-- views for coach -->
      <div *ngIf="isUserACoach((user | async))">
        <rb-meeting-item-coach *ngFor="let meeting of meetings | async"
                               [meeting]="meeting"
                               (meetingUpdated)="onRefreshRequested($event)"></rb-meeting-item-coach>
      </div>

      <!-- views for coachee -->
      <div *ngIf="isUserACoachee((user | async))">

        <div class="row">
          <h4 class="col-lg-12 black-text">A venir</h4>
          <div class="card collection col-lg-12">

            <div *ngIf="hasOpenedMeeting">
              <div class="collection-item" *ngFor="let meeting of meetingsOpened | async">
                <rb-meeting-item-coachee *ngIf="meeting.isOpen"
                                         [meeting]="meeting"
                                         (potentialDatePosted)="onRefreshRequested($event)">
                </rb-meeting-item-coachee>
              </div>
            </div>

            <div *ngIf="!hasOpenedMeeting" class="collection-item text-center">
              <h5>Vos séances à venir apparaîtront ici</h5>
            </div>

          </div><!--end card-->
        </div>

        <div class="row">
          <h4 class="col-lg-12 black-text">Complétées</h4>
          <div class="card collection col-lg-12">

            <div *ngIf="hasClosedMeeting">
              <div class="collection-item" *ngFor="let meeting of meetingsClosed | async">
                <rb-meeting-item-coachee *ngIf="!meeting.isOpen"
                                         [meeting]="meeting"
                                         (potentialDatePosted)="onRefreshRequested($event)">
                </rb-meeting-item-coachee>
              </div>
            </div>

            <div *ngIf="!hasClosedMeeting" class="collection-item text-center">
              <h5>Vos séances complétées apparaîtront ici</h5>
            </div>

          </div><!--end card-->
        </div>

      </div><!--end ngif-->
    </div><!--end row-->
  </div><!--end container-->
</div>

